<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>


	<title>Az CAR</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="UTF-8">
	<!-- External CSS libraries -->
	<link type="text/css" rel="stylesheet" href="/assets/css/bootstrap.min.css">
	<link type="text/css" rel="stylesheet" href="/assets/css/magnific-popup.css">
	<link type="text/css" rel="stylesheet" href="/assets/css/jquery.selectBox.css">
	<link type="text/css" rel="stylesheet" href="/assets/css/dropzone.css">
	<link type="text/css" rel="stylesheet" href="/assets/css/rangeslider.css">
	<link type="text/css" rel="stylesheet" href="/assets/css/animate.min.css">
	<link type="text/css" rel="stylesheet" href="/assets/css/slick.css">
	<link type="text/css" rel="stylesheet" href="/assets/css/jquery.mCustomScrollbar.css">
	<link type="text/css" rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<link type="text/css" rel="stylesheet" href="/assets/fonts/flaticon/font/flaticon.css">

	<!-- Favicon icon -->
	<link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">

	<!-- Google fonts -->
	<link rel="stylesheet" type="text/css"
		href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800%7CPlayfair+Display:400,700%7CRoboto:100,300,400,400i,500,700">

	<!-- Custom Stylesheet -->
	<link type="text/css" rel="stylesheet" href="/assets/css/style.css">
	<link rel="stylesheet" type="text/css" id="style_sheet" href="/assets/css/skins/default.css">

	<link rel="stylesheet" href="/assets/css/notiCss.css">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.js"></script>


	<script type="text/javascript" src="/assets/js/notiJs.js"></script>
	<style type="text/css">
		.selected {
			border: 1px solid blue;
		}
	</style>
	<!-- Custom Stylesheet -->
	<link type="text/css" rel="stylesheet" href="/assets/css/style.css">
	<link rel="stylesheet" type="text/css" id="style_sheet" href="/assets/css/skins/default.css">
	<link rel="stylesheet" href="/adminAssets/assets/extensions/sweetalert2/sweetalert2.min.css">
	<style type="text/css">
		.selected {
			border: 1px solid blue;
		}

		* {
			box-sizing: border-box;
			-moz-box-sizing: border-box;
			-webkit-box-sizing: border-box;
		}

		body {
			font-family: 'Roboto', sans-serif;
			color: #546E7A;
		}

		.wrapper {
			max-width: 18rem;
			padding: 0 0.5rem;
			margin-left: auto;
			margin-right: auto;
			padding-top: 4rem;
		}

		label {
			font-size: 0.75rem;
			font-weight: 400;
			display: block;
			margin-bottom: 0.5rem;
			color: #B0BEC5;
			border: 1px solid #ECEFF1;
			padding: 0.5rem 0.75rem;
			border-radius: 0.5rem;
		}

		input {
			font-family: 'Roboto', sans-serif;
			display: block;
			border: none;
			border-radius: 0.25rem;
			border: 1px solid transparent;
			line-height: 1.5rem;
			padding: 0;
			font-size: 1rem;
			color: #607D8B;
			width: 100%;
			margin-top: 0.5rem;
		}

		input:focus {
			outline: none;
		}

		#ui-datepicker-div {
			display: none;
			background-color: #fff;
			box-shadow: 0 0.125rem 0.5rem rgba(0, 0, 0, 0.1);
			margin-top: 0.25rem;
			border-radius: 0.5rem;
			padding: 0.5rem;
		}

		table {
			border-collapse: collapse;
			border-spacing: 0;
		}

		.ui-datepicker-calendar thead th {
			padding: 0.25rem 0;
			text-align: center;
			font-size: 0.75rem;
			font-weight: 400;
			color: #78909C;
		}

		.ui-datepicker-calendar tbody td {
			width: 2.5rem;
			text-align: center;
			padding: 0;
		}

		.ui-datepicker-calendar tbody td a {
			display: block;
			border-radius: 0.25rem;
			line-height: 2rem;
			transition: 0.3s all;
			color: #546E7A;
			font-size: 0.875rem;
			text-decoration: none;
		}

		.ui-datepicker-calendar tbody td a:hover {
			background-color: #E0F2F1;
		}

		.ui-datepicker-calendar tbody td a.ui-state-active {
			background-color: #009688;
			color: white;
		}

		.ui-datepicker-header a.ui-corner-all {
			cursor: pointer;
			position: absolute;
			top: 0;
			width: 2rem;
			height: 2rem;
			margin: 0.5rem;
			border-radius: 0.25rem;
			transition: 0.3s all;
		}

		.ui-datepicker-header a.ui-corner-all:hover {
			background-color: #ECEFF1;
		}

		.ui-datepicker-header a.ui-datepicker-prev {
			left: 0;
			background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDEzIDEzIj48cGF0aCBmaWxsPSIjNDI0NzcwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjI4OCA2LjI5NkwzLjIwMiAyLjIxYS43MS43MSAwIDAgMSAuMDA3LS45OTljLjI4LS4yOC43MjUtLjI4Ljk5OS0uMDA3TDguODAzIDUuOGEuNjk1LjY5NSAwIDAgMSAuMjAyLjQ5Ni42OTUuNjk1IDAgMCAxLS4yMDIuNDk3bC00LjU5NSA0LjU5NWEuNzA0LjcwNCAwIDAgMS0xLS4wMDcuNzEuNzEgMCAwIDEtLjAwNi0uOTk5bDQuMDg2LTQuMDg2eiIvPjwvc3ZnPg==");
			background-repeat: no-repeat;
			background-size: 0.5rem;
			background-position: 50%;
			transform: rotate(180deg);
		}

		.ui-datepicker-header a.ui-datepicker-next {
			right: 0;
			background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDEzIDEzIj48cGF0aCBmaWxsPSIjNDI0NzcwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjI4OCA2LjI5NkwzLjIwMiAyLjIxYS43MS43MSAwIDAgMSAuMDA3LS45OTljLjI4LS4yOC43MjUtLjI4Ljk5OS0uMDA3TDguODAzIDUuOGEuNjk1LjY5NSAwIDAgMSAuMjAyLjQ5Ni42OTUuNjk1IDAgMCAxLS4yMDIuNDk3bC00LjU5NSA0LjU5NWEuNzA0LjcwNCAwIDAgMS0xLS4wMDcuNzEuNzEgMCAwIDEtLjAwNi0uOTk5bDQuMDg2LTQuMDg2eiIvPjwvc3ZnPg==');
			background-repeat: no-repeat;
			background-size: 10px;
			background-position: 50%;
		}

		.ui-datepicker-header a>span {
			display: none;
		}

		.ui-datepicker-title {
			text-align: center;
			line-height: 2rem;
			margin-bottom: 0.25rem;
			font-size: 0.875rem;
			font-weight: 500;
			padding-bottom: 0.25rem;
		}

		.ui-datepicker-week-col {
			color: #78909C;
			font-weight: 400;
			font-size: 0.75rem;
		}
		table td, table th {
			padding-top: 0.2rem !important;
			padding-bottom: 0.2rem !important;
		}
	</style>
</head>

<body id="top">

	<div class="page_loader"></div>

	<!-- main header start -->
	<header class="main-header sticky-header header-with-top" id="main-header-2">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<nav class="navbar navbar-expand-lg navbar-light rounded">
						<a class="navbar-brand logo navbar-brand d-flex mr-auto" href="/">
							<img src="assets/img/logos/black-logo.png" alt="logo">
						</a>
						<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar"
							aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
							<span class="fa fa-bars"></span>
						</button>
						<div class="navbar-collapse collapse w-100" id="navbar">
							<ul class="navbar-nav ml-auto">
								<li class="nav-item"><a class="nav-link" th:href="@{/home/availablecars}">Available
										Cars</a></li>
								<li class="nav-item" th:if="${session.user}"><a class="nav-link"
										th:href="@{/home/myplan/}">My Plan</a></li>
								<li class="nav-item "><a class="nav-link" href="#">
										About Us </a></li>

								<li class="nav-item"><a class="nav-link" href="#">
										Contact Us </a></li>
								<div id="openNoti">
									<div class="" tabindex="0" id="noti">
										<svg version="1.1" xmlns="http://www.w3.org/2000/svg"
											xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 30"
											enable-background="new 0 0 50 30" xml:space="preserve">
											<g class="bell-icon__group">
												<path class="" id="ball" fill-rule="evenodd" stroke-width="1.5"
													clip-rule="evenodd" fill="none" stroke="#currentColor"
													stroke-miterlimit="10"
													d="M28.7,25 c0,1.9-1.7,3.5-3.7,3.5s-3.7-1.6-3.7-3.5s1.7-3.5,3.7-3.5S28.7,23,28.7,25z" />
												<path class="" id="shell" fill-rule="evenodd" clip-rule="evenodd"
													fill="#FFFFFF" stroke="#currentColor" stroke-width="2"
													stroke-miterlimit="10"
													d="M35.9,21.8c-1.2-0.7-4.1-3-3.4-8.7c0.1-1,0.1-2.1,0-3.1h0c-0.3-4.1-3.9-7.2-8.1-6.9c-3.7,0.3-6.6,3.2-6.9,6.9h0 c-0.1,1-0.1,2.1,0,3.1c0.6,5.7-2.2,8-3.4,8.7c-0.4,0.2-0.6,0.6-0.6,1v1.8c0,0.2,0.2,0.4,0.4,0.4h22.2c0.2,0,0.4-0.2,0.4-0.4v-1.8 C36.5,22.4,36.3,22,35.9,21.8L35.9,21.8z" />
											</g>
										</svg>
										<div class="notification-amount">
											<span id="notiCounter"></span>
										</div>
									</div>

								</div>
								<div id="modal-container">
									<div class="modal-background">
										<div class="modal">
											<h2>All Notification</h2>
											<div id="messages"></div>
											<svg class="modal-svg" xmlns="http://www.w3.org/2000/svg" width="100%"
												height="100%" preserveAspectRatio="none">
												<rect x="0" y="0" fill="none" width="226" height="162" rx="3" ry="3">
												</rect>
											</svg>
										</div>
									</div>
								</div>



								<li class="nav-item dropdown" th:if="${session.user}"><a
										class="btn btn-sm btn-white-sm-outline btn-round signup-link"
										th:href="@{/user/profile/} + ${session.user}"
										th:text="Hello+', ' +${session.user}"></a> <a
										class="btn btn-sm btn-theme btn-round signup-link" href="/logout">LogOut</a>
								</li>


								<li class="nav-item dropdown" th:if="${session.admin}"><a
										class="btn btn-sm btn-white-sm-outline btn-round signup-link"
										th:href="@{/user/profile/}+ ${session.admin}"
										th:text="Hello+', ' +${session.admin}"></a> <a
										class="btn btn-sm btn-theme btn-round signup-link" href="/dashboard/">Dash
										board</a> <a class="btn btn-sm btn-theme btn-round signup-link"
										href="/logout">Logout</a></li>
								<li class="nav-item dropdown" th:unless="${session.isAuthen}"><a
										class="btn btn-sm btn-theme btn-round signup-link" href="/login">Login</a> <a
										class="btn btn-sm btn-theme btn-round signup-link" href="/register">Register</a>
								</li>
							</ul>
						</div>
					</nav>
				</div>
			</div>
		</div>
	</header>
	<!-- main header end -->

	<!-- Sub banner start -->
	<div class="sub-banner overview-bgi">
		<div class="container">
			<div class="page-name">
				<h1>Car Detail</h1>
			</div>
		</div>
		<div class="page-info">
			<div class="container">
				<div class="row">
					<div class="col-md-5">
						<div class="breadcrumb-area">
							<ul>
								<li><a href="/">Index</a></li>
								<li><span>/</span>Car Detail</li>
							</ul>
						</div>
					</div>
					<div class="col-md-7">
						<div class="contact-info">
							<ul>
								<li><i class="fa fa-phone"></i> +84-3939-7979</li>
								<li><a href="tel:+84-3939-7979" class="btn btn-md btn-theme">Contact us</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Sub banner end -->

	<!-- Car details page start -->
	<div class="car-details-page content-area-2">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-md-12">
					<div id="carDetailsSlider" class="carousel car-details-sliders slide mb-60">
						<div class="heading-car">
							<div class="row">
								<div class="col-md-12">
									<div class="pull-left">
										<h3 th:text="${carDetails.carmodel.model}"></h3>
										<p th:text="${carDetails.address}">
											<i class="fa fa-map-marker"></i>
										</p>
									</div>
									<div class="p-r">
										<h3>$420,00</h3>
										<p>
											<i class="fa fa-star"></i><i class="fa fa-star"></i><i
												class="fa fa-star"></i><i class="fa fa-star"></i><i
												class="fa fa-star"></i>
										</p>
									</div>
								</div>
							</div>
						</div>
						<!-- main slider carousel items -->
						<div class="carousel-inner">
							<div class="active item carousel-item" data-slide-number="0">
								<img th:src="'${carDetails.id}'+'/'+${carDetails.images.get(0).urlImage}"
									class="img-fluid" alt="car-Slider">
							</div>
							<div class="item carousel-item" data-slide-number="1">
								<img th:src="'${carDetails.id}'+'/'+${carDetails.images.get(1).urlImage}"
									class="img-fluid" alt="car-Slider">
							</div>
							<div class="item carousel-item" data-slide-number="2">
								<img th:src="'${carDetails.id}'+'/'+${carDetails.images.get(2).urlImage}"
									class="img-fluid" alt="car-Slider">
							</div>
							<div class="item carousel-item" data-slide-number="4">
								<img th:src="'${carDetails.id}'+'/'+${carDetails.images.get(3).urlImage}"
									class="img-fluid" alt="car-Slider">
							</div>
							<div class="item carousel-item" data-slide-number="5">
								<img th:src="'${carDetails.id}'+'/'+${carDetails.images.get(4).urlImage}"
									class="img-fluid" alt="car-Slider">
							</div>
						</div>
						<!-- main slider carousel nav controls -->
						<ul class="carousel-indicators smail-car list-inline nav nav-justified">
							<li class="list-inline-item active"><a id="carousel-selector-0" class="selected"
									data-slide-to="0" data-target="#carDetailsSlider"> <img
										th:src="'${carDetails.id}'+'/'+${carDetails.images.get(0).urlImage}"
										class="img-fluid" alt="sub-car">
								</a></li>
							<li class="list-inline-item"><a id="carousel-selector-1" data-slide-to="1"
									data-target="#carDetailsSlider"> <img
										th:src="'${carDetails.id}'+'/'+${carDetails.images.get(1).urlImage}"
										class="img-fluid" alt="sub-car">
								</a></li>
							<li class="list-inline-item"><a id="carousel-selector-2" data-slide-to="2"
									data-target="#carDetailsSlider"> <img
										th:src="'${carDetails.id}'+'/'+${carDetails.images.get(2).urlImage}"
										class="img-fluid" alt="sub-car">
								</a></li>
							<li class="list-inline-item"><a id="carousel-selector-3" data-slide-to="3"
									data-target="#carDetailsSlider"> <img
										th:src="'${carDetails.id}'+'/'+${carDetails.images.get(3).urlImage}"
										class="img-fluid" alt="sub-car">
								</a></li>
							<li class="list-inline-item"><a id="carousel-selector-4" data-slide-to="4"
									data-target="#carDetailsSlider"> <img
										th:src="'${carDetails.id}'+'/'+${carDetails.images.get(4).urlImage}"
										class="img-fluid" alt="sub-car">
								</a></li>
						</ul>
					</div>
					<div class="heading-car-2 mb-60">
						<div class="row">
							<div class="col-md-12">
								<div class="pull-left">
									<h3 th:text="${carDetails.carmodel.model}"></h3>
									<p th:text="${carDetails.address}">
										<i class="fa fa-map-marker"></i>
									</p>
								</div>
								<div class="pull-right">
									<h3>
										<span class="text-right" th:text="'$'+${carDetails.price}+'/day'"></span>
									</h3>
									<p>
										<i class="fa fa-star-half-o"></i> <i class="fa fa-star"></i> <i
											class="fa fa-star"></i> <i class="fa fa-star"></i> <i
											class="fa fa-star"></i>
									</p>
								</div>
							</div>
						</div>
					</div>
					<!-- Specifications start -->
					<div class="specifications widget-2 d-lg-none d-xl-none mb-60">
						<h5 class="sidebar-title">Specifications</h5>
						<ul>
							<li><span>Brand: </span>
								<p class="mb-0" th:text="${carDetails.carmodel.brand}"></p>
							</li>

							<li><span>Model:</span>
								<p class="mb-0" th:text="${carDetails.carmodel.model}"></p>
							</li>
							<li><span>Body Style:</span>
								<p class="mb-0" th:text="${carDetails.carmodel.category}"></p>
							</li>

							<li><span>Year:</span>
								<p class="mb-0" th:text="${carDetails.carmodel.year}"></p>
							</li>

							<li><span>Transmission:</span>
								<p class="mb-0"
									th:text="${carDetails.engineInformationTranmission}? 'Automatic' :'Manual'"></p>
							</li>


							<li><span>Fuel Type: </span>
								<p class="mb-0" th:text="${carDetails.fuelType}"></p>
							</li>

							<li><span>Location</span>
								<p class="mb-0" th:text="${address}"></p>
							</li>


							<li th:if="${plusService}!= null"><span>Delivery Car
									Fee: </span>
								<p class="mb-0" th:text="${plusService.fee}+' $'"></p>
							</li>


							<li th:if="${extraFee}!= null"><span>Cleanning Fee :
								</span>
								<p class="mb-0" th:text="${extraFee.cleanningFee}+' $'"></p>
							</li>
							<li th:if="${extraFee}!= null"><span>Decoration Fee:
								</span>
								<p class="mb-0" th:text="${extraFee.decorationFee}+' $'"></p>
							</li>
						</ul>
					</div>
					<!-- Car vedio start -->
					<div class="car-video mb-60">
						<h3 class="heading">Car Description</h3>
						<p th:text="${carDetails.description}"></p>
					</div>
					<!-- Features opions start -->
					<div class="features-opions mb-60">
						<h3 class="heading">Features in Car</h3>

						<input type="hidden" id="resultFeatures" th:value="${carDetails.services}" name="services">
						<div class="row">
							<div class="col-3 mx-4 my-2 car-services" id="map-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/map-icon.png" alt="Map"> <span
									style="display: block;">Map</span> <input class="d-none" id="car-features-temp1"
									name="features[map]" type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="bluetooth-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/bluetooth-icon.png" alt="Bluetooth"> <span
									style="display: block;">Bluetooth</span>
								<input class="d-none" id="car-features-temp1" name="features[bluetooth]"
									type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="camera360-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/360_camera-icon.png" alt="Camera 360"> <span
									style="display: block;">Camera
									360</span> <input class="d-none" id="car-features-temp1" name="features[camera360]"
									type="checkbox">
							</div>
						</div>
						<div class="row">
							<div class="col-3 mx-4 my-2 car-services" id="parkingCamera-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/parking_camera-icon.png" alt="Parking camera"> <span
									style="display: block;">Parking
									camera</span> <input class="d-none" id="car-features-temp1" name="features[map]"
									type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="dashCamera-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/dash_camera-icon.png" alt="Dash camera"> <span
									style="display: block;">Dash
									camera</span> <input class="d-none" id="car-features-temp1"
									name="features[bluetooth]" type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="reverseCamera-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/reverse_camera-icon.png" alt="Reverse camera"> <span
									style="display: block;">Reverse
									Camera</span> <input class="d-none" id="car-features-temp1"
									name="features[camera360]" type="checkbox">
							</div>
						</div>
						<div class="row">
							<div class="col-3 mx-4 my-2 car-services" id="tireSensor-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/tpms-v2-icon.png" alt="Tire Sensor"> <span
									style="display: block;">Tire
									Sensor</span> <input class="d-none" id="car-features-temp1" name="features[map]"
									type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="impactSensor-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/impact_sensor-icon.png" alt="Impact Sensor"> <span
									style="display: block;">Impact
									Sensor</span> <input class="d-none" id="car-features-temp1"
									name="features[bluetooth]" type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="headUp-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/head_up-icon.png" alt="Head Up">
								<span style="display: block;">Head Up</span> <input class="d-none"
									id="car-features-temp1" name="features[camera360]" type="checkbox">
							</div>
						</div>
						<div class="row">
							<div class="col-3 mx-4 my-2 car-services" id="sunRoof-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/sunroof-icon.png" alt="Sunroof">
								<span style="display: block;">Sun roof</span> <input class="d-none"
									id="car-features-temp1" name="features[map]" type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="gps-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/gps-icon.png" alt="Gps"> <span
									style="display: block;">Gps</span> <input class="d-none" id="car-features-temp1"
									name="features[bluetooth]" type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="babySeat-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/babyseat-icon.png" alt="Baby seat"> <span
									style="display: block;">Baby
									seat</span> <input class="d-none" id="car-features-temp1" name="features[camera360]"
									type="checkbox">
							</div>
						</div>
						<div class="row">
							<div class="col-3 mx-4 my-2 car-services" id="usb-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/usb-icon.png" alt="Usb"> <span
									style="display: block;">USB</span> <input class="d-none" id="car-features-temp1"
									name="features[map]" type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="spareTire-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/spare_tire-icon.png" alt="Spare Tire"> <span
									style="display: block;">Spare
									Tire-</span> <input class="d-none" id="car-features-temp1"
									name="features[bluetooth]" type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="dvd-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/dvd-icon.png" alt="dvd"> <span
									style="display: block;">DVD </span> <input class="d-none" id="car-features-temp1"
									name="features[camera360]" type="checkbox">
							</div>
						</div>
						<div class="row">
							<div class="col-3 mx-4 my-2 car-services" id="bonnet-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/bonnet-icon.png" alt="Bonnet">
								<span style="display: block;">Bonnet</span> <input class="d-none"
									id="car-features-temp1" name="features[map]" type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="etc-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/etc-icon.png" alt="etc"> <span
									style="display: block;">ETC </span> <input class="d-none" id="car-features-temp1"
									name="features[camera360]" type="checkbox">
							</div>
							<div class="col-3 mx-4 my-2 car-services" id="airBags-service"
								style="vertical-align: top; text-align: center; cursor: pointer; -webkit-user-select: none; user-select: none;">
								<img class="img-fluid" style="max-width: 50%; max-height: 50%"
									src="/assets/img/icon-services/airbags-icon.png" alt="Airbags">
								<span style="display: block;">Airbags</span> <input class="d-none"
									id="car-features-temp1" name="features[bluetooth]" type="checkbox">
							</div>

						</div>
					</div>

					<!-- Car vedio start -->
					<div class="car-video mb-60">
						<h3 class="heading">Car Rules</h3>
						<p th:text="${carDetails.rules}"></p>
					</div>
					<!-- Section Location start -->

					<!-- Comments section start -->
					<div class="comments-section">
						<h3 class="heading">Comments Section</h3>
						<ul class="comments">
							<li>
								<div class="comment">
									<div class="comment-author">
										<a href="#"> <img src="/assets/img/avatar/avatar-13.jpg" class="rounded-circle"
												alt="avatar-13">
										</a>
									</div>
									<div class="comment-content">
										<div class="comment-meta">
											<div class="comment-meta-author">Jane Doe</div>
											<div class="comment-meta-reply">
												<a href="#">Reply</a>
											</div>
											<div class="comment-meta-date">
												<span>8:42 PM 10/3/2022</span>
											</div>
										</div>
										<div class="clearfix"></div>
										<div class="comment-body">
											<div class="comment-rating">
												<i class="fa fa-star"></i> <i class="fa fa-star"></i> <i
													class="fa fa-star"></i> <i class="fa fa-star"></i> <i
													class="fa fa-star-o"></i>
											</div>
											<p>Lorem ipsum dolor sit amet, consectetur adipiscing
												elit. Donec luctus tincidunt aliquam. Aliquam gravida massa
												at sem vulputate interdum et vel eros. Maecenas eros enim,
												tincidunt vel turpis vel, dapibus tempus nulla. Donec vel
												nulla dui. Pellentesque sed ante sed.</p>
										</div>
									</div>
								</div>
								<ul>
									<li>
										<div class="comment">
											<div class="comment-author">
												<a href="#"> <img src="/assets/img/avatar/avatar-13.jpg"
														class="rounded-circle" alt="avatar-13">
												</a>
											</div>

											<div class="comment-content">
												<div class="comment-meta">
													<div class="comment-meta-author">Jane Doe</div>

													<div class="comment-meta-reply">
														<a href="#">Reply</a>
													</div>

													<div class="comment-meta-date">
														<span>8:42 PM 10/3/2022</span>
													</div>
												</div>
												<div class="clearfix"></div>
												<div class="comment-body">
													<div class="comment-rating">
														<i class="fa fa-star"></i> <i class="fa fa-star"></i> <i
															class="fa fa-star"></i> <i class="fa fa-star-half-o"></i>
														<i class="fa fa-star-o"></i>
													</div>
													<p>Lorem ipsum dolor sit amet, consectetur adipiscing
														elit. Donec luctus tincidunt aliquam. Aliquam gravida
														massa at sem vulputate interdum et vel eros. Maecenas eros
														enim, tincidunt vel turpis vel, dapibus tempus nulla.
														Donec vel nulla dui.</p>
												</div>
											</div>
										</div>
									</li>
								</ul>
							</li>
							<li>
								<div class="comment">
									<div class="comment-author">
										<a href="#"> <img src="/assets/img/avatar/avatar-13.jpg" class="rounded-circle"
												alt="avatar-13">
										</a>
									</div>
									<div class="comment-content">
										<div class="comment-meta">
											<div class="comment-meta-author">Jane Doe</div>
											<div class="comment-meta-reply">
												<a href="#">Reply</a>
											</div>
											<div class="comment-meta-date">
												<span>8:42 PM 10/3/2022</span>
											</div>
										</div>
										<div class="clearfix"></div>
										<div class="comment-body">
											<div class="comment-rating">
												<i class="fa fa-star"></i> <i class="fa fa-star"></i> <i
													class="fa fa-star"></i> <i class="fa fa-star"></i> <i
													class="fa fa-star-o"></i>
											</div>
											<p>Lorem ipsum dolor sit amet, consectetur adipiscing
												elit. Donec luctus tincidunt aliquam. Aliquam gravida massa
												at sem vulputate interdum et vel eros. Maecenas eros enim,
												tincidunt vel turpis vel, dapibus tempus nulla. Donec vel
												nulla dui. Pellentesque.</p>
										</div>
									</div>
								</div>

							</li>
						</ul>
					</div>
					<!-- Contact 1 start -->
					<div class="contact-3 mb-30">
						<h3 class="heading">Leave a Comment</h3>
						<div class="container">
							<div class="row">
								<form action="#" method="GET" enctype="multipart/form-data">
									<div class="row">
										<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
											<div class="form-group name">
												<input type="text" name="name" class="form-control" placeholder="Name">
											</div>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
											<div class="form-group email">
												<input type="email" name="email" class="form-control"
													placeholder="Email">
											</div>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
											<div class="form-group subject">
												<input type="text" name="subject" class="form-control"
													placeholder="Subject">
											</div>
										</div>
										<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
											<div class="form-group number">
												<input type="text" name="phone" class="form-control"
													placeholder="Number">
											</div>
										</div>
										<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
											<div class="form-group message">
												<textarea class="form-control" name="message"
													placeholder="Write message"></textarea>
											</div>
										</div>
										<div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
											<div class="send-btn">
												<button type="submit" class="btn btn-color btn-md btn-message">Send
													Message</button>
											</div>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-4 col-md-12">
					<div class="sidebar mbl">
						<!-- Specifications start -->
						<div class="specifications widget d-none d-xl-block d-lg-block">
							<h5 class="sidebar-title">Specifications</h5>
							<ul>
								<li><span>Brand: </span>
									<p class="mb-0" th:text="${carDetails.carmodel.brand}"></p>
								</li>

								<li><span>Model:</span>
									<p class="mb-0" th:text="${carDetails.carmodel.model}"></p>
								</li>
								<li><span>Body Style:</span>
									<p class="mb-0" th:text="${carDetails.carmodel.category}"></p>
								</li>

								<li><span>Year:</span>
									<p class="mb-0" th:text="${carDetails.carmodel.year}"></p>
								</li>

								<li><span>Transmission:</span>
									<p class="mb-0"
										th:text="${carDetails.engineInformationTranmission}? 'Automatic' :'Manual'"></p>
								</li>


								<li><span>Fuel Type: </span>
									<p class="mb-0" th:text="${carDetails.fuelType}"></p>
								</li>

								<li><span>Location</span>
									<p class="mb-0" th:text="${address}"></p>
								</li>


								<li th:if="${plusService}!= null"><span>Delivery Fee
										: </span>
									<p class="mb-0" th:text="${plusService.fee}+' $'"></p>
								</li>


								<li th:if="${extraFee}!= null"><span>Cleanning Fee :
									</span>
									<p class="mb-0" th:text="${extraFee.cleanningFee}+' $'"></p>
								</li>
								<li th:if="${extraFee}!= null"><span>Decoration Fee
										: </span>
									<p class="mb-0" th:text="${extraFee.decorationFee}+' $'"></p>
								</li>
							</ul>
						</div>
						<!-- Recent posts start -->
						<div class="widget recent-posts">
							<form id="form-car-rental" th:action="${'/home/availablecars/details/' + carDetails.id}"
								method="post">
								<input type="hidden" name="totalRent" value="0">
								<input type="hidden" name="isSameProvince" value="0">
								<input type="hidden" name="isSameDistrict" value="0">
								<input type="hidden" name="deliveryFee">
								<h2 class="" th:text="'$'+${carDetails.price}+'/day'"></h2>
								<div class="row">
									<div class="col-12">
										<div class="row">
											<div class="col-md-6">
												<div class="wrapper">
													<label for="form-fromDate">From
														<input name="fromDate-string" type="text" id="form-fromDate"
															autocomplete="off">
													</label>
												</div>
											</div>
											<div class="col-md-6">
												<div class="wrapper">
													<label for="form-toDate">To
														<input name="toDate-string" type="text" id="form-toDate"
															autocomplete="off" onChange="return updateTotalRent();">
													</label>
												</div>
											</div>
										</div>
									</div>
									<div class="col-12">
										<hr>
										<h3 class="sidebar-title">Location</h3>
										<p th:attr="data-full-address=${fullAddress}" th:text="${fullAddress}"></p>
									</div>
									<div class="col-12" th:if="carDetails.isCarPlus">
										<h6 class="">Choose your current location:</h6>
										<div class="input-group-prepend">
											<input type="text" readonly class="form-control" name="deliveryAddress"
												placeholder="Click to enter address" onclick="return openModal.click();"
												id="carAddress" value=""> <a href="#" data-toggle="modal"
												data-target="#addressModal" id="openModal" hidden="true">Click me</a>
										</div>
										<div class="col-12 text-danger text-center">
											<span id="validation-NULL-address"></span>
										</div>
									</div>
									<div class="col-12">
										<hr>
										<div class="row">
											<div class="col-6">
												<p class="float-left">Rental Unit Price:</p>
											</div>
											<div class="col-6">
												<p class="float-right" th:text="'$'+${carDetails.price}+'/day'"></p>
											</div>
											<div class="col-6">
												<p class="float-left">Details:</p>
											</div>
											<div class="col-6">
												<p class="float-right" th:attr="data-price=${carDetails.price}"
													id="form-details-amount"></p>
											</div>
											<div class="col-6">
												<p th:attr="data-uqwfjwissa=${user.balance != null ? user.balance : 0}"
													class="float-left">Delivery Fee:</p>
											</div>
											<div class="col-6">
												<p th:attr="data-delivery-fee=${plusService != null ? plusService.fee : 0}"
													class="float-right" id="form-delivery-fee">$0</p>
											</div>
										</div>
									</div>
									<div class="col-12">
										<hr>
										<div class="row">
											<div class="col-6">
												<p style="font-weight: 500;" class="float-left">Total:</p>
											</div>
											<div class="col-6">
												<p style="font-weight: 500;" class="float-right" id="form-total"></p>
											</div>
										</div>
									</div>
								</div>
								<div th:if="${!isKhongHaveBangLai && user.phone != null}" class="text-center mt-5">
									<input type="hidden" name="differenceDate" id="form-differenceDate">
									<input type="hidden" th:attr="data-car-model=${carDetails.carmodel.model}">
									<input type="hidden" th:attr="data-car-year=${carDetails.carmodel.year}">
									<button href="" id="form-submit-btn" class="btn btn-md btn-color">Rent Now</button>
								</div>
								<div th:if="${isKhongHaveBangLai || user.phone == null}" class="text-center mt-5">
									<p th:if="${isKhongHaveBangLai}" class="text-danger">You must update your driving license before rent</p>
									<p th:if="${user.phone == null}" class="text-danger">You must update your phone number before rent</p>
									<a class="btn btn-md btn-color" th:href="@{/user/profile/} + ${session.user}">Go to profile</a>
								</div>
							</form>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Car details page start -->

	<!-- Footer start -->
	<footer class="footer">
		<div class="container footer-inner">
			<div class="row">
				<div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">
					<div class="footer-item">
						<h4>Contact Us</h4>
						<div class="f-border"></div>
						<ul class="contact-info">
							<li>Address: 590 CMT8, P.11, Q.3, Tp.Hồ Chí Minh</li>
							<li>Email: <a href="mailto:AzCars@AzCars.com">AzCars@AzCars.com</a>
							</li>
							<li>Phone: <a href="tel:+84-3939-7979">+84-3939-7979</a></li>
							<li>Fax: <a href="fax:+84-3939-7979">+84-3939-7979</a></li>
						</ul>

						<ul class="social-list clearfix">
							<li><a href="#" class="facebook-bgh"><i class="fa fa-facebook"></i></a></li>
							<li><a href="#" class="twitter-bgh"><i class="fa fa-twitter"></i></a></li>
							<li><a href="#" class="google-bgh"><i class="fa fa-google-plus"></i></a></li>
							<li><a href="#" class="rss-bgh"><i class="fa fa-rss"></i></a>
							</li>
							<li><a href="#" class="linkedin-bgh"><i class="fa fa-linkedin"></i></a></li>
						</ul>
					</div>
				</div>
				<div class="col-xl-2 col-lg-2 col-md-6 col-sm-6">
					<div class="footer-item">
						<h4>Useful Links</h4>
						<div class="f-border"></div>
						<ul class="links">
							<li><a href="#"><i class="flaticon-arrows"></i>About us</a>
							</li>

							<li><a href="#"><i class="flaticon-arrows"></i>Available
									Cars Listing</a></li>


							<li><a href="#"><i class="flaticon-arrows"></i>Contact
									Us</a></li>

							<li><a href="#"><i class="flaticon-arrows"></i>Car
									Details</a></li>
						</ul>
					</div>
				</div>
				<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
					<div class="recent-posts footer-item">
						<h4>Recent Posts</h4>
						<div class="f-border"></div>
						<div class="media mb-4">
							<a class="pr-3" href="/"> <img src="/assets/img/sub-car/sub-car.jpg" alt="car" />
							</a>
							<div class="media-body align-self-center">
								<h5>
									<a href="car-details.html">2016 Audi S5 Coupe</a>
								</h5>
								<p>February 27, 2022</p>
								<p>
									<strong>$245,000</strong>
								</p>
							</div>
						</div>
						<div class="media mb-4">
							<a class="pr-3" href="/"> <img src="/assets/img/sub-car/sub-car-2.jpg" alt="car" />
							</a>
							<div class="media-body align-self-center">
								<h5>
									<a href="car-details.html">2016 Audi R8</a>
								</h5>
								<p>February 27, 2022</p>
								<p>
									<strong>$245,000</strong>
								</p>
							</div>
						</div>
						<div class="media">
							<a class="pr-3" href="/"> <img src="/assets/img/sub-car/sub-car-3.jpg" alt="car" />
							</a>
							<div class="media-body align-self-center">
								<h5>
									<a href="car-details.html">Read Audi A7 TDI</a>
								</h5>
								<p>February 27, 2022</p>
								<p>
									<strong>$245,000</strong>
								</p>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">
					<div class="footer-item clearfix">
						<h4>Subscribe</h4>
						<div class="f-border"></div>
						<div class="Subscribe-box">
							<p>Excepteur sint occaecat cupidatat non proident, sunt in
								culpa qui officia deserunt mollit.</p>
							<form action="#" method="GET">
								<p>
									<input type="text" class="form-contact" name="email" placeholder="Enter Address" />
								</p>
								<p>
									<button type="submit" name="submitNewsletter"
										class="btn btn-block btn-color">Subscribe</button>
								</p>
							</form>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-xl-12">
					<p class="copy">
						&copy; 2024 <a href="/" target="_blank">Az Cars</a>. Group 3 Final
						Project .
					</p>
				</div>
			</div>
		</div>
	</footer>
	<!-- Footer end -->

	<!-- Off-canvas sidebar -->
	<div class="off-canvas-sidebar">
		<div class="off-canvas-sidebar-wrapper">
			<div class="off-canvas-header">
				<a class="close-offcanvas" href="#"><span class="fa fa-times"></span></a>
			</div>
			<div class="off-canvas-content">
				<aside class="canvas-widget">
					<div class="logo text-center">
						<img src="/assets/img/logos/logo.png" alt="logo">
					</div>
				</aside>
				<aside class="canvas-widget">
					<ul class="menu">
						<li class="menu-item menu-item-has-children"><a href="index.html">Home</a></li>
						<li class="menu-item"><a href="car-grid-leftside.html">Car
								List</a></li>
						<li class="menu-item"><a href="car-details.html">Car
								Detail</a></li>
						<li class="menu-item"><a href="blog-single-sidebar-right.html">Blog</a></li>
						<li class="menu-item"><a href="about-1.html">About US</a></li>
						<li class="menu-item"><a href="contact-1.html">Contact US</a></li>
					</ul>
				</aside>
				<aside class="canvas-widget">
					<ul class="social-icons">
						<li><a href="#"><i class="fa fa-facebook"></i></a></li>
						<li><a href="#"><i class="fa fa-twitter"></i></a></li>
						<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
						<li><a href="#"><i class="fa fa-linkedin"></i></a></li>
						<li><a href="#"><i class="fa fa-vk"></i></a></li>
					</ul>
				</aside>
			</div>
		</div>
	</div>

	<div class="modal car-modal fade" id="addressModal" tabindex="-1" role="dialog" aria-labelledby="addressModal"
		style="display: none;" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true" id="offModal">×</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-lg-6 modal-left">
							<div class="modal-left-content">
								<div id="modalCarousel" class="carousel slide" data-ride="carousel">
									<div class="carousel-inner" role="listbox">
										<div class="carousel-item active">
											<img src="/assets/img/icon-services/address.jpg" alt="">
										</div>
									</div>
								</div>
								<div class="description">
									<h3>Description</h3>
									<p>Select your car receiving address</p>
									<p class="text-danger">* For the best experience, make sure you have picked the most convenient place for owner to delivery this car to you</p>
								</div>
							</div>
						</div>
						<div class="col-lg-6 modal-right">
							<div class="modal-right-content bg-white">
								<section class="form-group row">

									<label class="col-3 col-form-label" for="provinceSelect">Province:</label>
									<div class="col-7">
										<select id="provinceSelect" class="form-control" name="province"
											onchange="return provinceSubmit();">
											<option value="">Select Province</option>

											<option th:each="item : ${provinceList}" th:value="${item.code}"
												th:text="${item.full_name}"></option>
										</select>
									</div>



								</section>
								<section class="form-group row">

									<label class="col-3 col-form-label" for="districtSelect">District:</label>

									<div class="col-7">
										<select disabled="disabled" id="districtSelect" class="form-control"
											onchange="return districtSubmit()" name="districtSelect">
										</select>
									</div>



								</section>
								<section class="form-group row">
									<label class="col-3 col-form-label" for="wardSelect">Ward:</label>
									<div class="col-7">
										<select disabled="disabled" id="wardSelect" class="form-control"
											name="wardSelect">
										</select>
									</div>

								</section>
								<section class="form-group row">
									<label class="col-3 col-form-label" for="street">Street:</label>
									<div class="col-7">
										<input class="form-control" id="street" type="text">
									</div>
								</section>
								<section class="form-group row">
									<label class="col-3 col-form-label" for="houseNo">House
										No:</label>
									<div class="col-7">
										<input class="form-control" id="houseNo" type="text">
									</div>
								</section>

								<section class="form-group row">
									<span id="validation-address" class="text-danger text-center"></span>
								</section>
								<button class="btn btn-theme" onclick="return addressSubmit();">Save</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- External JS libraries -->
	<script src="/assets/js/jquery-2.2.0.min.js"></script>
	<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
	<script src="/assets/js/popper.min.js"></script>
	<script src="/assets/js/bootstrap.min.js"></script>
	<script src="/assets/js/jquery.selectBox.js"></script>
	<script src="/assets/js/rangeslider.js"></script>
	<script src="/assets/js/jquery.magnific-popup.min.js"></script>
	<script src="/assets/js/jquery.filterizr.js"></script>
	<script src="/assets/js/wow.min.js"></script>
	<script src="/assets/js/backstretch.js"></script>
	<script src="/assets/js/jquery.countdown.js"></script>
	<script src="/assets/js/jquery.scrollUp.js"></script>
	<script src="/assets/js/particles.min.js"></script>
	<script src="/assets/js/typed.min.js"></script>
	<script src="/assets/js/dropzone.js"></script>
	<script src="/assets/js/jquery.mb.YTPlayer.js"></script>
	<script src="/assets/js/slick.min.js"></script>
	<script src="/assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="/assets/js/ie-emulation-modes-warning.js"></script>
	<script src="https://kit.fontawesome.com/56c961acc9.js"></script>
	<script th:src="@{/adminAssets/assets/extensions/sweetalert2/sweetalert2.min.js}"></script>

	<script th:src="@{/adminAssets/assets/static/js/pages/sweetalert2.js}"></script>

	<!-- Custom JS Script -->
	<script src="/assets/js/app.js"></script>

	<script th:inline="javascript">
		/*<![CDATA[*/
	    var extraFeeeeeee = /*[[${extraFee}]]*/ '';
	    /*]]>*/
		var carFeatures = document.getElementById('resultFeatures').value;
		var listResult = document
			.getElementsByClassName("col-3 mx-4 my-2 car-services");
		for (var i = 0; i < listResult.length; i++) {
			// Checking if the string contains the ID of the current element
			if (carFeatures.includes(listResult[i].id)) {
				document.getElementById(listResult[i].id).classList
					.add("selected");

			} else {
				document.getElementById(listResult[i].id).setAttribute("style",
					"display:none")

			}
		}

		$(function () {
			var today = new Date();
			var todayFormatted = $.datepicker.formatDate("dd-mm-yy", today);
			var tomorrow = new Date(today);
			tomorrow.setDate(tomorrow.getDate());
			var tomorrowFormatted = $.datepicker.formatDate("dd-mm-yy", tomorrow);

			var fromDateInput = $("#form-fromDate");
			var toDateInput = $("#form-toDate");

			$("#form-fromDate").datepicker({
				dateFormat: "dd-mm-yy",
				duration: "fast",
				minDate: 0, // Tối thiểu là hôm nay
				beforeShowDay: function (date) {
					// Disable các ngày trước hôm nay
					return [date = today];
				},
				onSelect: function (selectedDate) {
					// Cập nhật giá trị minDate của toDateInput
					toDateInput.datepicker("option", "minDate", selectedDate);
					updateTotalRent();
				}
			}).datepicker("setDate", todayFormatted);

			$("#form-toDate").datepicker({
				dateFormat: "dd-mm-yy",
				duration: "fast",
				minDate: 0, // Tối thiểu là ngày mai
				beforeShowDay: function (date) {
					// Disable các ngày trước hôm nay
					return [date = today];
				}
			}).datepicker("setDate", tomorrowFormatted); // Đặt giá trị mặc định là hôm nay
		});


		function updateTotalRent() {
			console.log('running total rent function');
			// Lấy giá xe mỗi ngày từ thuộc tính data-price
			var dailyPrice = parseFloat(document.getElementById("form-details-amount").getAttribute("data-price"));
			console.log("dailyPrice:", dailyPrice);

			// Kiểm tra và xử lý fromDateValue
			var fromDateValue = document.getElementById("form-fromDate").value;
			var fromDate = null;
			if (fromDateValue && fromDateValue.match(/^\d{2}-\d{2}-\d{4}$/)) {
				var fromDateParts = fromDateValue.split("-");
				fromDate = new Date(parseInt(fromDateParts[2]), parseInt(fromDateParts[1]) - 1, parseInt(fromDateParts[0]));
			}
			console.log("fromDate:", fromDate);

			// Kiểm tra và xử lý toDateValue
			var toDateValue = document.getElementById("form-toDate").value;
			var toDate = null;
			if (toDateValue && toDateValue.match(/^\d{2}-\d{2}-\d{4}$/)) {
				var toDateParts = toDateValue.split("-");
				toDate = new Date(parseInt(toDateParts[2]), parseInt(toDateParts[1]) - 1, parseInt(toDateParts[0]));
			}
			console.log("toDate:", toDate);

			if (fromDate && toDate) {
				// Tính số mili giây chênh lệch giữa hai ngày
				var timeDifference = toDate.getTime() - fromDate.getTime();
				console.log("timeDifference:", timeDifference);

				// Chuyển đổi từ mili giây sang ngày
				var daysDifference = Math.ceil(timeDifference / (1000 * 3600 * 24)) + 1;
				document.getElementById("form-differenceDate").value = daysDifference;

				console.log("daysDifference:", daysDifference);

				// Tính tổng giá thuê xe
				var totalRent = dailyPrice * daysDifference;

				var deliveryFeeElement = $('#form-delivery-fee');
				var deliveryFeeText = deliveryFeeElement.text().trim();

				var deliveryFee = 0;

				if (deliveryFeeText.includes('$')) {
					deliveryFee = parseInt(deliveryFeeText.replace('$', '').trim());
				}

				totalRent += deliveryFee;

				// Cập nhật nội dung của phần tử total-rent
				document.getElementById("form-details-amount").textContent = '$' + dailyPrice.toLocaleString() + ' x ' + daysDifference + (daysDifference > 1 ? ' days' : ' day');
				document.getElementById("form-total").textContent = '$' + totalRent.toLocaleString();
				document.querySelector("#form-car-rental input[name='totalRent']").value = totalRent;
			}
		}

		function provinceSubmit() {
			const districtSelect = $("#districtSelect").get(0);
			const wardSelect = $("#wardSelect").get(0);

			$.ajax({
				url: "/home/carregister/getDistrict",
				type: "get",
				data: {provinceCode: $("#provinceSelect").val()},
				success: function (res) {
					$(districtSelect).removeAttr('disabled');
					$(districtSelect).html('<option value ="">--Select District--</option>');
					$.each(res.districtList, function (key, value) {
						$(districtSelect).append('<option value="' + value.code + '">' + value.full_name + '</option>');
					});
					$(wardSelect).html('<option value="" >--Select Ward--</option>');
				}
			});
		};
		function districtSubmit() {
			const districtSelect = $("#districtSelect").get(0);
			const wardSelect = $("#wardSelect").get(0);

			$.ajax({
				url: "/home/carregister/getWard",
				type: "get",
				data: {districtCode: $("#districtSelect").val()},
				success: function (res) {
					$(wardSelect).removeAttr('disabled');
					$(wardSelect).html('<option value ="">--Select Ward--</option>');
					$.each(res.wardList, function (key, value) {
						$(wardSelect).append('<option value="' + value.code + '">' + value.full_name + '</option>');
					});
				}
			});
		};
		function addressSubmit() {
			const houseNo = document.getElementById('houseNo').value;
			const street = document.getElementById('street').value;
			if (houseNo == "" || street == "") {
				document.getElementById('validation-address').textContent = "Address is not valid";
				validateAddress();
				return false;
			} else {

				document.getElementById('validation-address').textContent = "";
				var address = $("#houseNo").val() + ", " + $("#street").val() + ", " + $("#wardSelect option:selected").text() + ", " + $("#districtSelect option:selected").text() + ", " + $("#provinceSelect option:selected").text();
				$("#carAddress").val(address);
				console.log(address);
				console.log($("#carAddress").val());

				carAddress.setAttribute("value", address);

				offModal.click();
				validateAddress();
				getDeliveryFee();
			}
			/* document.getElementById('validation-address').textContent = "";
			const address =
				($("#wardSelect option:selected").text() == "--Select Ward--" ? "" : $("#wardSelect option:selected").text() + ", ")
				+ ($("#districtSelect option:selected").text() == "--Select District--" ? "" : $("#districtSelect option:selected").text() + ", ")
				+ $("#provinceSelect option:selected").text();
			$("#carAddress").val(address);
			carAddress.setAttribute("value", address);

			validateAddress();
			getDeliveryFee();
			offModal.click(); */
		}

		function validateAddress() {

			var addressResult = document.getElementById('carAddress').value;

			if (addressResult == "") {

				document.getElementById('validation-NULL-address').textContent = "Car address must be declared";
			} else {
				document.getElementById('validation-NULL-address').textContent = "";
			}

		}

		function getDeliveryFee() {
			$('#form-submit-btn').attr('disabled', 'disabled');
			const fullAddress = document.querySelector("p[data-full-address]");
			const carRawAddress = fullAddress.getAttribute('data-full-address');
			if (!carRawAddress.includes($("#provinceSelect option:selected").text())) {
				console.log('ko trùng tinh - khong giao xe');
				$('#form-delivery-fee').text('No delivery to your location');
				$('#form-delivery-fee').addClass('text-danger');
				$("#form-car-rental input[name='isSameProvince']").val(0);
				$("#form-car-rental input[name='isSameDistrict']").val(0);
				updateTotalRent();
			} else {
				if (carRawAddress.includes($("#districtSelect option:selected").text())) {
					console.log('trung quan(thanhpho) - giao free');
					$('#form-delivery-fee').text('$0');
					$('#form-submit-btn').removeAttr('disabled');
					$('#form-delivery-fee').removeClass('text-danger');
					$("#form-car-rental input[name='isSameProvince']").val(1);
					$("#form-car-rental input[name='isSameDistrict']").val(1);
					updateTotalRent();
				} else {
					console.log('trung tinh - khong trung thanh pho - charge fee');
					$('#form-delivery-fee').text('$' + $('#form-delivery-fee').data('delivery-fee'));
					$('#form-submit-btn').removeAttr('disabled');
					$('#form-delivery-fee').removeClass('text-danger');
					$("#form-car-rental input[name='isSameProvince']").val(1);
					$("#form-car-rental input[name='isSameDistrict']").val(0);
					updateTotalRent();
				}
			}
		}

		$('#form-submit-btn').on('click', function (e) {
			e.preventDefault();
			const totalFinalRent = parseFloat($("#form-car-rental input[name='totalRent']").val()) + parseFloat(extraFeeeeeee ? extraFeeeeeee.decorationFee ?? 0 : 0) + parseFloat(extraFeeeeeee ? extraFeeeeeee.cleanningFee ?? 0 : 0) + 200;
			const uissa = $('p[data-uqwfjwissa]').data('uqwfjwissa');
			if (parseFloat(uissa) < parseFloat(totalFinalRent)) {
				Swal.fire({
					title: "Balance is not enough",
					text: "You won't be able to rent this car",
					icon: "warning",
					confirmButtonColor: "#3754ec",
				});
			} else {
				let deliveryFeeElement11 = $('#form-delivery-fee');
				let deliveryFeeText11 = deliveryFeeElement11.text().trim();

				let deliveryFee11 = 0;

				if (deliveryFeeText11.includes('$')) {
					deliveryFee11 = parseInt(deliveryFeeText11.replace('$', '').trim());
				}
				$("input[name='deliveryFee']").val(deliveryFee11);
				const extraFeeField = extraFeeeeeee 
								? `<tr>
										<td colspan=2 class="text-center">Extra Fee</td>
									</tr>
									<tr>
										<td class="text-left">Cleanning Fee: </td>
										<td class="text-right">$${extraFeeeeeee.cleanningFee.toLocaleString() ?? 0}</td>
									</tr>
									<tr>
										<td class="text-left">Smell Fee: </td>
										<td class="text-right">$${extraFeeeeeee.decorationFee.toLocaleString() ?? 0}</td>
									</tr>
									<tr>
										<td class="text-left">Insurance Fee: </td>
										<td class="text-right">$200</td>
									</tr>`
							  	: '';
				Swal.fire({
					title: "Confirmation!",
					html: `<table class="table">
								<tr>
									<th class="text-left">Model: </th>
									<td class="text-right">${$('input[data-car-model]').data('car-model')}</td>
								</tr>
								<tr>
									<th class="text-left">Year: </th>
									<td class="text-right">${$('input[data-car-year]').data('car-year')}</td>
								</tr>
								<tr>
									<th class="text-left">Rental per day: </th>
									<td class="text-right">$${$('p[data-price]').data('price').toLocaleString()}</td>
								</tr>
								<tr>
									<th class="text-left">From: </th>
									<td class="text-right">${$("input[name='fromDate-string']").val()}</td>
								</tr>
								<tr>
									<th class="text-left">To: </th>
									<td class="text-right">${$("input[name='toDate-string']").val()}</td>
								</tr>
								<tr>
									<th class="text-left">Total days: </th>
									<td class="text-right">${$("input[name='differenceDate']").val().toLocaleString()}</td>
								</tr>
								<tr>
									<th class="text-left">Delivery fee: </th>
									<td class="text-right">$${deliveryFee11.toLocaleString()}</td>
								</tr>
								<tr>
									<th class="text-left">Sub Total: </th>
									<td class="text-right">
										$${$("#form-car-rental input[name='totalRent']").val().toLocaleString()}
									</td>
								</tr>
								${extraFeeField}
								<tr>
									<th class="text-left">Total: </th>
									<td class="text-right">
										<h4>$${totalFinalRent.toLocaleString()}</h4>
										<p class="text-success">Current balance: $${uissa.toLocaleString()}</p>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<p class="text-danger">* If you have agreed, you will be locked $${totalFinalRent.toLocaleString()} as a mortgage (fees included as notified), the fees incurred will be returned to you if no problems occur after car rental completed.</p>
										<p class="text-danger">* If the car owner does not respond within 15 minutes, the locked money will be fully refunded to you immediately.</p>
									</td>
								</tr>
							</table>`,
					showCancelButton: true,
					confirmButtonColor: "#3085d6",
					cancelButtonColor: "#ff214f",
					confirmButtonText: "Yes, do it!"
				}).then((result) => {
					if (result.isConfirmed) {
						Swal.fire({
							title: "Rented!",
							text: "Waiting for car owner to accept your rental (2 minutes)",
							html: `
								<a href="/home/myplan/">You can check your request booking here</a>
							`,
							icon: "success"
						});
						setTimeout(function () {
							const RENTAL_FORM = $('#form-car-rental').get(0);
							RENTAL_FORM.submit();
						}, 2000);
					}
				});
			}
		});

		// Gọi hàm cập nhật tổng giá thuê xe khi trang được tải và mỗi khi input thay đổi
		window.onload = function () {
			updateTotalRent();
			$('#form-submit-btn').attr('disabled', 'disabled');
		};
	</script>
</body>

</html>